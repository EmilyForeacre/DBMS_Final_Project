<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine Management</title>

    <style>
            body{
                font-family:Georgia, 'Times New Roman', Times, serif;
                background: #d3dbe7;
                margin:0;
                padding: 0;
            }

            header{
                background: #75c7e5;
                padding: 20px;
                text-align: center;
                color:#245a6d;
                font-size: 24px;
                font-weight: bold;
                margin-top:1%;
            }

            .welcome {
                font-size:15px;
                color:#2a6ac7;
                background: white;
                padding: 10px;
                border-radius: 30px;
                text-align: center;
                width: 40%;
                margin: 20px;
                border-color: #2a6ac7;

            }
            .container {
                display: flex;
                justify-content: center;
                gap: 5px;             
                margin-top: 20px;
                align-items: flex-start;

            }
    </style>
</head>
<body>
    <a href="http://localhost:3000/dashboard">Back to Dashboard</a>
    <header>Medicine Management</header>

<div class="container">

    <!-- Add Medicine Form -->
    <form class="welcome" action="/add_medicine" method="post">
        <h2>Add Medicine</h2>

        <label for="medicine_name">Medicine Name:</label><br>
        <input type="text" id="medicine_name" name="medicine_name" required><br><br>

        <label for="generic_name">Generic Name:</label><br>
        <input type="text" id="generic_name" name="generic_name"><br><br>

        <label for="dosage_type">Dosage Type:</label><br>
        <input type="text" id="dosage_type" name="dosage_type" required><br><br>

        <label for="strength">Strength:</label><br>
        <input type="text" id="strength" name="strength" required><br><br>

        <label for="manufacturer">Manufacturer:</label><br>
        <input type="text" id="manufacturer" name="manufacturer"><br><br>

        <label for="needs_prescription">Needs Prescription:</label>
        <select id="needs_prescription" name="needs_prescription">
            <option value="1">Yes</option>
            <option value="0">No</option>
        </select><br><br>

        <label for="instructions">Instructions:</label><br>
        <textarea id="instructions" name="instructions" rows="2" cols="50"></textarea><br><br>

        <label for="side_effects">Side Effects:</label><br>
        <textarea id="side_effects" name="side_effects" rows="2" cols="50"></textarea><br><br>

        <label for="currently_used">Currently Used:</label>
        <select id="currently_used" name="currently_used">
            <option value="1">Yes</option>
            <option value="0">No</option>
        </select><br><br>

        <button type="submit">Add Medicine</button>
    </form>

    <!-- Delete Medicine Form -->
    <form class="welcome" action="/delete_medicine" method="post">
        <h2>Delete Medicine</h2>

        <label for="medicine_id">Enter Medicine Name to Delete:</label><br>
        <input type="text" id="medicine_id" name="medicine_id" required><br><br>

        <button type="submit">Delete Medicine</button>
    </form>
</div>
    <!-- All Medicines Table -->
    <h2>All Medicines</h2>
    <table border="1" cellpadding="6">
        <thead>
            <tr>
                <th>ID</th>
                <th>Medicine Name</th>
                <th>Generic Name</th>
                <th>Dosage Type</th>
                <th>Strength</th>
                <th>Manufacturer</th>
                <th>Needs Prescription</th>
                <th>Instructions</th>
                <th>Side Effects</th>
                <th>Currently Used</th>
            </tr>
        </thead>
        <tbody id="medicineTable"></tbody>
    </table>

    <!-- Fetch Medicines -->
    <script>
        fetch('/medicines')
            .then(response => response.json())
            .then(data => {
                const table = document.getElementById("medicineTable");
                table.innerHTML = "";

                data.forEach(m => {
                    const row = table.insertRow();
                    row.insertCell(0).innerText = m.medicine_id;
                    row.insertCell(1).innerText = m.medicine_name;
                    row.insertCell(2).innerText = m.generic_name || "";
                    row.insertCell(3).innerText = m.dosage_type;
                    row.insertCell(4).innerText = m.strength;
                    row.insertCell(5).innerText = m.manufacturer || "";
                    row.insertCell(6).innerText = m.needs_prescription ? "Yes" : "No";
                    row.insertCell(7).innerText = m.instructions || "";
                    row.insertCell(8).innerText = m.side_effects || "";
                    row.insertCell(9).innerText = m.currently_used ? "Yes" : "No";
                });
            })
            .catch(err => console.error("Error loading medicines:", err));
    </script>
</body>
</html>