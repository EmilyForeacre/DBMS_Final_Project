<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Tables</title>

    <style>
            body{
                font-family:Georgia, 'Times New Roman', Times, serif;
                background: #d3dbe7;
                margin:0;
                padding: 0;
            }

            header{
                background: #75c7e5;
                padding: 20px;
                text-align: center;
                color:#245a6d;
                font-size: 24px;
                font-weight: bold;
                margin-top:1%;
            }

            .welcome {
                font-size:15px;
                color:#2a6ac7;
                background: white;
                padding: 10px;
                border-radius: 30px;
                text-align: center;
                width: 40%;
                margin: 20px;
                border-color: #2a6ac7;

            }
            .container {
                display: flex;
                justify-content: center;
                gap: 5px;             
                margin-top: 20px;
                align-items: flex-start;

            }
    </style>
</head>
<body>
    <a href="http://localhost:3000/dashboard">Back to Dashboard</a>
    <header>Search Tables</header>
<div class="container">
    <!-- Search Form -->
    <form class="welcome" action="/search_records" method="post" novalidate>
        <h2>Search Records</h2>

        <label for="table_name">Select Table:</label>
        <select id="table_name" name="table_name" required>
            <option value="patients">Patients</option>
            <option value="appointments">Appointments</option>
            <option value="doctors">Doctors</option>
            <option value="medicines">Medicines</option>
        </select><br><br>

        <label for="search_column">Search Column:</label><br>
        <input type="text" id="search_column" name="search_column" required><br><br>

        <label for="search_value">Search Value:</label><br>
        <input type="text" id="search_value" name="search_value" required><br><br>

        <button type="submit">Search</button>
    </form>
</div>
<script>
document.querySelector('form[action="/search_records"]').addEventListener("submit", function(e) {

    const column = document.getElementById("search_column");
    const value = document.getElementById("search_value");

    const columnVal = column.value.trim();
    const valueVal = value.value.trim();

    document.querySelectorAll(".error").forEach(err => err.remove());

    let isValid = true;

    const lettersPattern = /^[A-Za-z_]+$/;
    if (columnVal === "") {
        showError(column, "Search column is required.");
        isValid = false;
    } else if (!lettersPattern.test(columnVal)) {
        showError(column, "Column name must contain only letters (no numbers or symbols).");
        isValid = false;
    }

    const valuePattern = /^[A-Za-z0-9\s]+$/;
    if (valueVal === "") {
        showError(value, "Search value is required.");
        isValid = false;
    } else if (!valuePattern.test(valueVal)) {
        showError(value, "Search value can only contain letters, numbers, and spaces.");
        isValid = false;
    }

    if (!isValid) {
        e.preventDefault();
    }
});

function showError(field, message) {
    const error = document.createElement("div");
    error.className = "error";
    error.style.color = "red";
    error.style.marginTop = "6px";
    error.style.fontSize = "14px";
    error.textContent = message;
    field.insertAdjacentElement("afterend", error);
}
</script>

</body>
</html>
