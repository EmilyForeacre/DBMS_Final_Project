<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patients Management</title>
    </head>
    <body>
        <a href="http://localhost:3000/dashboard">Back to Dashboard</a>
        <h1>Patient Management</h1>

        <!-- Add Patient Form -->
    <h2>Add Patient</h2>
    <form action="/add_patient" method="post">

        <label for="first_name">First Name:</label><br>
        <input type="text" id="first_name" name="first_name" required><br><br>

        <label for="last_name">Last Name:</label><br>
        <input type="text" id="last_name" name="last_name"><br><br>

        <label for="date_of_birth">Date of Birth:</label><br>
        <input type="date" id="date_of_birth" name="date_of_birth" required><br><br>

        <label for="gender">Gender:</label><br>
        <select id="gender" name="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select><br><br>

        <label for="phone_number">Phone Number:</label><br>
        <input type="text" id="phone_number" name="phone_number"><br><br>

        <label for="email">Email:</label><br>
       <input type="email" id="email" name="email"><br><br>

        <label for="address">Address:</label><br>
        <input type="text" id="address" name="address"><br><br>

        <label for="state">State:</label><br>
        <input type="text" id="state" name="state" maxlength="2"><br><br>

        <label for="city">City:</label><br>
        <input type="text" id="city" name="city"><br><br>

        <label for="zip_code">Zip Code:</label><br>
        <input type="text" id="zip_code" name="zip_code"><br><br>

        <label for="insurance_provider">Insurance Provider:</label><br>
        <input type="text" id="insurance_provider" name="insurance_provider"><br><br>

        <label for="current_patient">Current Patient:</label>
        <select id="current_patient" name="current_patient">
            <option value="1">Yes</option>
            <option value="0">No</option>
        </select><br><br>

        <button type="submit">Add Patient</button>
    </form>

    <!-- Delete Patient Form -->
    <h2>Delete Patient</h2>
    <form action="/delete_patient" method="post">
        <label for="email">Enter Patient Email to Delete:</label><br>
        <input type="email" id="email" name="email" required><br><br>

        <button type="submit">Delete Patient</button>
    </form>

    <!-- All Patients Table -->
    <h2>All Patients</h2>
    <table border="1" cellpadding="6">
        <thead>
            <tr>
                <th>Patient ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>DOB</th>
                <th>Gender</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Address</th>
                <th>State</th>
                <th>City</th>
                <th>Zip Code</th>
                <th>Insurance Provider</th>
                <th>Current Patient</th>
            </tr>
        </thead>
        <tbody id="patientTable"></tbody>
    </table>

    <!-- Fetch Patients -->
    <script>
        fetch('/patients')
            .then(response => response.json())
            .then(data => {
                const table = document.getElementById("patientTable");
                table.innerHTML = "";

                data.forEach(m => {
                    const row = table.insertRow();
                    row.insertCell(0).innerText = p.patient_id;
                    row.insertCell(1).innerText = p.first_name;
                    row.insertCell(2).innerText = p.last_name;
                    row.insertCell(3).innerText = p.date_of_birth;
                    row.insertCell(4).innerText = p.gender;
                    row.insertCell(5).innerText = p.phone_number || "";
                    row.insertCell(6).innerText = p.email || "";
                    row.insertCell(7).innerText = p.address  || "";
                    row.insertCell(8).innerText = p.state || "";
                    row.insertCell(8).innerText = p.city || "";
                    row.insertCell(8).innerText = p.zip_code || "";
                    row.insertCell(8).innerText = p.insurance_provider || "";
                    row.insertCell(9).innerText = p.current_patient ? "Yes" : "No";
                });
            })
            .catch(err => console.error("Error loading patients:", err));
    </script>
</body>
</html>
